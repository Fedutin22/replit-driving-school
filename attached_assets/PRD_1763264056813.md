Product Requirements Document (PRD)
===================================

Product: Driving School Web Application (MVP)
---------------------------------------------

* * * * *

1\. Product Overview
--------------------

### 1.1 Vision

Deliver a **web-based platform** for driving schools that digitizes the **end-to-end lifecycle**:

> student registration → course enrollment → theory & practice → testing → certification → reporting → payments (basic)

with a **single unified UI** that reveals additional capabilities depending on role (**Student / Instructor / Admin**).

### 1.2 Goals

-   Reduce manual admin work (spreadsheets, paper, messaging apps).

-   Improve transparency for students regarding their **progress and exam readiness**.

-   Provide a configurable framework to satisfy **different local regulatory rules**.

-   Establish an extensible platform for future enhancements (mobile, richer analytics, SMS, integrations).

### 1.3 In-Scope (MVP)

-   Web app (responsive browser UI).

-   Authentication & accounts (email + password).

-   Roles: **Student, Instructor, Admin** with role-based permissions.

-   Course & topic management.

-   Question bank & test templates, auto-scored tests.

-   Course completion rules and certificate generation.

-   Scheduling & class registration (theory sessions).

-   Basic performance statistics and reporting with CSV export.

-   Foundations for online payments (one provider, basic flows).

-   Basic email notifications and template configuration.

-   Non-functional: basic performance, security, availability, and GDPR-aligned privacy.

Out-of-scope items are inherited from BRD (mobile apps, advanced analytics, multi-tenant white-labeling, government integrations, advanced pricing, SMS, in-app chat, etc.).

* * * * *

2\. Feature Definition & Prioritization (Kano + MoSCoW)
-------------------------------------------------------

### 2.1 Feature Catalog & Kano Classification

| # | Feature Area | Description (MVP level) | Kano Category | MoSCoW |
| --- | --- | --- | --- | --- |
| F1 | Authentication & Account Management | Email-based registration, login, password reset, session mgmt | **Basic** | Must |
| F2 | Role-based Access & User Management | Student/Instructor/Admin roles, unified UI with role-based capabilities | **Basic** | Must |
| F3 | Question Bank | MCQ bank (single/multiple choice), tagging, CRUD | **Performance** | Must |
| F4 | Test Templates & Test Taking | Test templates (random/manual), pass criteria, browser test-taking, auto-scoring | **Performance** | Must |
| F5 | Courses, Topics & Completion Logic | Courses, topics, linking tests to completion criteria, progress tracking | **Performance** | Must |
| F6 | Certificates | Course completion detection, certificate generation + download | **Performance** | Must |
| F7 | Scheduling & Class Registration | Schedule entries, capacity, session registration, attendance logging | **Performance** | Must |
| F8 | Online Payments (Foundation) | Course pricing, single provider integration, payment status tracking | **Performance** | Must |
| F9 | Notifications & Email Templates | Event-based email notifications + configurable templates | **Performance** | Must |
| F10 | Reporting & Admin Dashboard | Admin KPIs, basic reports, CSV exports | **Performance** | Must |
| F11 | Activity Logs | Basic audit log for admin changes | **Basic** | Should |
| F12 | Bulk Question Import | CSV or similar import into question bank | **Excitement** | Should |
| F13 | Time limits & retakes for tests | Time-boxed tests and basic retake policy | **Excitement** | Should |
| F14 | Payment history & simple invoices | Admin payment view and downloadable invoice/receipt | **Excitement** | Should |
| F15 | Class reminders & broadcasts | Reminder emails, broadcast email per course | **Excitement** | Should |

**Note:** "Basic" = expected hygiene; "Performance" = directly improves measurable outcomes (efficiency, pass rate); "Excitement" = delights power users, candidate for later iterations within MVP timeline if capacity allows.

* * * * *

3\. Detailed Requirements
-------------------------

### 3.1 Authentication & Account Management (F1)

#### 3.1.1 Functional Requirements

**AUTH-1 (M-1)**\
Users can **register** using email and password. Mandatory fields: first name, last name, email, password. Role defaults to **Student** unless invitation specifies another role.

**AUTH-2 (M-2)**\
Users can **log in** with email and password. Invalid credentials prompt error without revealing which field is incorrect.

**AUTH-3 (M-3)**\
Password reset via email: user submits email → receive time-limited token link → set new password.

**AUTH-4 (M-4)**\
Session management: configurable inactivity timeout (default 30 minutes) after which user is logged out.

**AUTH-5 (S-1)**\
Email verification flow: on registration or admin-created account, send verification link; unverified users can't access core features.

**AUTH-6 (S-2)**\
Admin **invite user** flow: admin enters email + role → system sends invite link to complete profile and set password.

**AUTH-7 (C-1)**\
[Future] Social login (Google) for students. Out-of-scope for MVP unless extra capacity.

**AUTH-8 (C-2)**\
[Future] Two-factor authentication for admins.

#### 3.1.2 Non-Functional

-   NFR-SEC-1: Passwords hashed and salted (e.g., Argon2 / bcrypt).

-   NFR-SEC-2: Login and reset endpoints rate-limited.

-   NFR-US-1: Friendly, localized error and success messages.

-   NFR-PERF-1: Login and registration responses < 1s under normal load.

* * * * *

### 3.2 Roles & User Management (F2)

#### 3.2.1 Functional Requirements

**ROLES-1 (M-5)**\
System supports roles: **Student**, **Instructor**, **Administrator**.

**ROLES-2 (M-6)**\
Unified UI layout (same navigation shells); role-based visibility for menu items and actions.

-   Student: dashboard, course list, schedule, tests, results, certificates, payments.

-   Instructor: today/week schedule, assigned courses, enrolled students, tests (view/create as allowed), attendance & result entry.

-   Admin: full configuration + reporting + payment settings.

**ROLES-3 (M-7)**\
Admin can **create, edit, deactivate** users and assign roles. Deactivation prevents login but preserves historical data.

**ROLES-4 (M-8)**\
Admin can assign users (Student, Instructor) to courses.

**ROLES-5 (S-3)**\
Role model is extensible (e.g., ability to add new roles later such as Branch Admin) without rewriting core RBAC.

**ROLES-6 (S-4)**\
Activity log for critical admin actions (user created/edited/deactivated, course created/edited, test template changes).

#### 3.2.2 Non-Functional

-   NFR-SEC-3: Enforce RBAC **server-side**; client-based checks are only for UX.

-   NFR-LOG-1: All critical admin actions auditable with timestamp, actor, entity reference.

* * * * *

### 3.3 Question Bank (F3)

#### 3.3.1 Functional Requirements

**QBANK-1 (M-9)**\
Admin/Instructor can CRUD questions.

**QBANK-2 (M-10)**\
Question fields:

-   Text (rich text minimal: bold/italic, bullet list).

-   Explanation (optional, shown post-test or in review).

-   Type: **single choice** (radio) or **multiple choice** (checkbox).

-   Choices: label, correct/incorrect flag.

-   Tags/topics.

**QBANK-3 (M-11)**\
Questions must belong to at least one **topic** and may be linked to one or more **courses**.

**QBANK-4 (M-12)**\
Search/filter questions by topic, course, tag, type, text substring.

**QBANK-5 (S-5)**\
Bulk import from CSV or similar structured format with validation and error reporting.

**QBANK-6 (S-6)**\
Soft delete/archiving: ability to archive a question so it cannot be used in new tests but remains in past test history.

**QBANK-7 (C-2)**\
[Future] Difficulty level field for each question.

#### 3.3.2 Non-Functional

-   NFR-US-2: Question editing UI supports quick keyboard-based entry to minimize clicks.

-   NFR-DATA-1: Changes to questions used in historic tests must not retroactively alter scored results.

* * * * *

### 3.4 Test Generation & Delivery (F4)

#### 3.4.1 Functional Requirements

**TEST-1 (M-13)**\
Admin/Instructor can create **Test Templates** with:

-   Name, description.

-   Linked course and/or topics.

-   Mode:

    -   Random: N questions drawn from selected pool (topics/courses/tags).

    -   Manual: explicit question selection.

-   Pass criteria: minimum percentage or minimum points.

**TEST-2 (M-14)**\
System generates **test instances** for each student based on a template, storing which questions were served.

**TEST-3 (M-15)**\
Students can take tests in browser:

-   Option A (MVP): all questions on one page with auto-scroll.

-   Option B (if UX requires): simple pagination with Next/Previous.

**TEST-4 (M-16)**\
Automatic evaluation: scoring based on correct answers. For multiple-choice with multiple correct answers:

-   Full points only if student selections match correct answers exactly.

-   Partial scoring is not supported in MVP.

**TEST-5 (M-17)**\
Store test results: date/time, score (% and absolute), pass/fail, duration, template version, student id.

**TEST-6 (S-7)**\
Per-test time limit (countdown). On expiry:

-   Either submit automatically,

-   Or prevent further changes and prompt manual submit.

**TEST-7 (S-8)**\
Retake policies: configure maximum attempts and optional cooldown period.

**TEST-8 (C-3)**\
[Future] Randomization settings (question order, answer order).

**TEST-9 (C-4)**\
[Future] Test analytics per question (difficulty, discrimination).

#### 3.4.2 Non-Functional

-   NFR-US-3: Test-taking UI must work reliably on desktop and modern mobile browsers.

-   NFR-PERF-2: Test submission and scoring < 1s under typical loads.

* * * * *

### 3.5 Courses, Topics & Completion Criteria (F5)

#### 3.5.1 Functional Requirements

**COURSE-1 (M-18)**\
Admin can create/manage **Courses**: name, description, category (e.g., car, motorcycle), default pricing (if any).

**COURSE-2 (M-19)**\
Each course has an ordered list of **Topics** (theory/practice modules).

**COURSE-3 (M-20)**\
Admin defines **completion criteria** by linking test templates to course and specifying:

-   Which tests must be passed.

-   Minimum score thresholds per test.

**COURSE-4 (M-21)**\
Student assignment:

-   Admin can assign students to courses.

-   Optional configuration for self-enrollment (not mandatory for MVP; if implemented, must respect capacity / payment rules).

**COURSE-5 (M-22)**\
System tracks per-student completion status for each course based on test pass results.

**COURSE-6 (S-9)**\
Topic classification: "Theory only", "Practice only", or "Both" for reporting.

**COURSE-7 (S-10)**\
Topic-level completion tracking (e.g., topic marked as "covered" for a student when required tests attended/passed or attendance logged).

**COURSE-8 (C-5)**\
[Future] Learning materials per topic (file/video links).

#### 3.5.2 Non-Functional

-   NFR-DATA-2: Course & topic entities must be versionable or at least prevent destructive updates that break historical records.

-   NFR-US-4: Course overview page should clearly show completion progress (percentage, passed/required tests).

* * * * *

### 3.6 Certificates (F6)

#### 3.6.1 Functional Requirements

**CERT-1 (M-23)**\
Once a student fulfills completion criteria for a course, system flags status **"Eligible for Certificate"**.

**CERT-2 (M-24)**\
Admin sees list of eligible students and can generate a certificate record with:

-   Student name.

-   Course name & category.

-   Completion date.

-   Unique certificate ID (e.g., `COURSECODE-YYYY-XXXX`).

**CERT-3 (M-25)**\
Student can view certificate details and download a **PDF or print-friendly** version.

**CERT-4 (S-11)**\
Certificate template is configurable (logo, school name, address, contact, signature line).

**CERT-5 (S-12)**\
Admin can revoke a certificate with a mandatory reason; revocation should appear in audit log.

**CERT-6 (C-6)**\
[Future] Public verification portal by certificate ID.

#### 3.6.2 Non-Functional

-   NFR-SEC-4: Certificate PDFs must not expose sensitive internal identifiers.

-   NFR-DATA-3: Certificate IDs must be unique and stable.

* * * * *

### 3.7 Scheduling & Class Registration (F7)

#### 3.7.1 Functional Requirements

**SCHED-1 (M-26)**\
Admin/Instructor can create **schedule entries**:

-   Course, topic, instructor, date/time, duration, room/label, capacity.

**SCHED-2 (M-27)**\
Students can view schedule for all courses they are enrolled in. Basic list and/or calendar view.

**SCHED-3 (M-28)**\
Students can **register** for sessions while capacity not exceeded; show remaining seats.

**SCHED-4 (M-29)**\
Instructor/Admin can log attendance as present/absent per scheduled session.

**SCHED-5 (S-13)**\
Simple conflict detection when registering:

-   Warn student if they are already registered for overlapping session in the same course (or configurable).

**SCHED-6 (S-14)**\
Calendar view (weekly) for instructors/admins highlighting their sessions.

**SCHED-7 (C-7/C-8)**\
[Future] External calendar sync & rescheduling suggestions.

#### 3.7.2 Non-Functional

-   NFR-US-5: Time zones either fixed per school or configurable; avoid cross-time-zone complexity in MVP.

-   NFR-PERF-3: Calendar views must load in < 2s for typical month range.

* * * * *

### 3.8 Online Payments (F8)

#### 3.8.1 Functional Requirements

**PAY-1 (M-30)**\
Admin can define base **course pricing** (currency, amount).

**PAY-2 (M-31)**\
Integration with one payment provider (e.g., Stripe-like redirect):

-   Create payment session for a given student+course.

-   Redirect to provider's hosted payment page.

-   Handle return and webhooks to update payment status: pending, paid, failed.

**PAY-3 (M-32)**\
Students see payment status per course (e.g., unpaid, pending, paid).

**PAY-4 (S-15)**\
Admin **payment history** view sortable/filterable by course, date range, status.

**PAY-5 (S-16)**\
Simple invoice/receipt view (PDF or HTML print) with required fields: school details, student, course, amount, date, payment reference/ID.

**PAY-6 (C-9/C-10)**\
[Future] Multiple pricing models & accounting integration.

#### 3.8.2 Non-Functional

-   NFR-SEC-5: PCI scope minimized by using hosted payment pages; system **must not** store raw card data.

-   NFR-DATA-4: Webhooks must be idempotent.

* * * * *

### 3.9 Notifications & Internal Communication (F9)

#### 3.9.1 Functional Requirements

**NOTIF-1 (M-33)**\
System sends email notifications for:

-   Registration/account creation.

-   Test availability/assignment.

-   Test result (pass/fail).

-   Payment success/failure.

**NOTIF-2 (M-34)**\
Admin can configure templates: subject, body with placeholders (e.g., `{student_name}`, `{course_name}`, `{test_name}`, `{result}`).

**NOTIF-3 (S-17)**\
Reminder emails for upcoming scheduled classes (e.g., 24h before session).

**NOTIF-4 (S-18)**\
Admin broadcast email to all students in a specific course.

**NOTIF-5 (W-2/W-3)**\
No in-app chat or SMS in MVP.

#### 3.9.2 Non-Functional

-   NFR-PERF-4: Use async/background job queue for sending emails.

-   NFR-DATA-5: Basic log of sent emails (to, type, timestamp, status).

* * * * *

### 3.10 Reporting & Control Panel (F10)

#### 3.10.1 Functional Requirements

**REPORT-1 (M-35)**\
Admin dashboard summaries:

-   Active students count.

-   Number of ongoing courses, completed courses.

-   Recent test results / passes.

**REPORT-2 (M-36)**\
Reports with filters by course, date range, instructor:

-   Student list with course status (not started, in progress, completed, certified).

-   Test results list (per test template, per student).

-   Course completion list (who completed which courses).

**REPORT-3 (M-37)**\
Export CSV for key reports: students, test results, certificates.

**REPORT-4 (S-19)**\
Simple pivot-style summaries (e.g., pass rate per course per month).

**REPORT-5 (S-20)**\
Downloadable certificate list per course.

**REPORT-6 (C-11)**\
[Future] Visual charts and advanced analytics.

#### 3.10.2 Non-Functional

-   NFR-PERF-5: Reports must paginate and handle at least several thousand rows without timeout.

-   NFR-SEC-6: Only Admins (and possibly designated roles) can access full reports.

* * * * *

### 3.11 Cross-Cutting Non-Functional Requirements

-   **Performance**

    -   NFR-PERF-6: Most pages < 2 seconds load under normal load.

-   **Availability**

    -   NFR-AVAIL-1: Target 99% uptime for MVP.

-   **Security & Privacy**

    -   NFR-SEC-7: All traffic over HTTPS.

    -   NFR-SEC-8: GDPR-aligned data handling; consent and privacy notice pages.

-   **Usability**

    -   NFR-US-6: Responsive design for desktop and mobile.

    -   NFR-US-7: Clear navigation: dashboard → courses → tests → schedule → payments.

-   **Localization**

    -   NFR-LOC-1: All strings externalized for localization; initial support for local language + English.

* * * * *

4\. User Workflows & Journeys (User Story Mapping)
--------------------------------------------------

### 4.1 Student Journey -- "Alex" (Registration → Course Completion → Certificate)

**High-level activities:**

1.  Discover & register.

2.  Enroll in course & pay.

3.  Attend classes and practice.

4.  Take tests.

5.  Complete course & obtain certificate.

| Activity | User Step | System Features Involved | Potential Friction / Risks |
| --- | --- | --- | --- |
| Register | Sign-up, verify email | AUTH, NOTIF | Email in spam; confusing verification flow |
| Enroll & pay | Select course, enroll, complete payment | COURSE, PAY, NOTIF | Payment failure handling unclear; no clear "status" indicator |
| View schedule | Check upcoming classes, register for sessions | SCHED | Overwhelming schedule view; time conflicts not obvious |
| Prepare & practice | Review topics, take practice tests (if provided) | TEST, QBANK, COURSE | Test UI complexity, unclear difference between practice/exam |
| Take exam | Start test, submit answers, receive pass/fail | TEST, NOTIF | Losing progress due to timeout/network issues |
| Completion & cert | See course marked as complete, download certificate | COURSE, CERT, REPORT | Unclear eligibility conditions; difficulty finding certificate |

**Representative user stories:**

-   As a **Student**, I want to **see all my active courses and their completion status**, so that I know how close I am to being exam-ready.

-   As a **Student**, I want to **view upcoming sessions and register with one click**, so that I don't miss required theory classes.

-   As a **Student**, I want to **view my test history (scores and pass/fail)**, so that I can track my progress over time.

* * * * *

### 4.2 Instructor Journey -- "Marta" (Daily Operations)

Activities:

1.  Review today/weekly schedule.

2.  Deliver classes and log attendance.

3.  Assign or review tests.

4.  Monitor student progress & flag issues.

Key user stories:

-   As an **Instructor**, I want a **"Today" view of my sessions** with student counts, so that I can prepare quickly.

-   As an **Instructor**, I want to **mark attendance from my laptop or tablet during class**, so that records are always up-to-date.

-   As an **Instructor**, I want to **see a per-student summary (tests taken, scores, attendance)** within a course, so that I can identify who needs extra help.

Potential friction:

-   Attendance UI too click-heavy.

-   Not enough filtering to see problem students (low scores, low attendance).

* * * * *

### 4.3 Admin Journey -- "Igor" (Configuration & Reporting)

Activities:

1.  Configure courses, topics, tests.

2.  Onboard students and instructors.

3.  Track course utilization and pass rates.

4.  Manage payments and certificates.

5.  Provide reports to management/regulators.

Sample user stories:

-   As an **Admin**, I want to **set up a new course with topics, tests, and completion criteria**, so that I can launch new student groups quickly.

-   As an **Admin**, I want to **export a list of all students who completed a course in a given date range**, so that I can report to authorities.

-   As an **Admin**, I want to **see payment status per student and course**, so that I can follow up on unpaid fees.

Potential friction:

-   Overly complex setup screens; need clear "wizard" or guided flow for course configuration.

-   Confusing mapping between topics, tests, and completion criteria.

* * * * *

5\. Technical Feasibility & Architecture
----------------------------------------

### 5.1 Architecture Style

-   **Backend:** Modular monolith (MVP) with clear domain modules:

    -   Auth & Identity

    -   User & Role Management

    -   Courses & Topics

    -   Question Bank & Tests

    -   Scheduling

    -   Payments

    -   Notifications

    -   Reporting & Analytics

-   **Frontend:** Responsive web SPA (React/Vue/Angular) or server-rendered + HTMX style, depending on team preference.

-   **Database:** Relational DB (e.g., PostgreSQL) to support transactional integrity and reporting.

-   **Integrations:**

    -   Email provider (SMTP or API).

    -   Payment provider (redirect-based).

### 5.2 Conceptual Architecture Diagram (Textual)

```
[Browser (Student/Instructor/Admin)]
         |
         v
[Web Frontend SPA / SSR]
         |
         v
[Backend API Gateway / App Server]
   |        |          |          |           |
   v        v          v          v           v
[Auth]  [Courses]  [QB & Tests] [Scheduling] [Payments]
   |        |          |          |           |
   \        |          |          |           /
    \       |          |          |          /
     v      v          v          v         v
            [Relational Database]
   |                       |
   v                       v
[Notifications Module]  [Reporting/Analytics]

External Services:
- Email Provider (SMTP/API)
- Payment Provider (Redirect + Webhooks)

```

### 5.3 Key Technical Decisions & Constraints

-   Use **JWT or server-side sessions** for authentication.

-   RBAC enforced at backend router/controller level.

-   Use **event or message queue** (or minimal job runner) for async tasks like email sending and PDF generation.

-   Payment integration must be pluggable to support additional providers in future.

-   Reporting should rely on **read-optimized queries** or views to avoid locking production tables.

* * * * *

6\. Acceptance Criteria (Gherkin Examples)
------------------------------------------

> Note: Not every single FR is listed, but each **feature area** has representative, testable scenarios. These can be expanded into a full test suite.

### 6.1 Authentication & Accounts

```
Scenario: User registers and verifies email
  Given I am on the registration page
  When I submit valid name, email and password
  Then I should receive a verification email
  And when I click the verification link
  Then my account should be marked as verified
  And I should be able to log in successfully

Scenario: Password reset
  Given I have a registered account
  And I am on the "Forgot password" page
  When I enter my registered email
  Then I should receive a reset link
  When I open the link and set a new password
  Then I should be able to log in with the new password
  And I should not be able to log in with the old password

```

### 6.2 Roles & User Management

```
Scenario: Admin creates an instructor user
  Given I am logged in as an Admin
  When I create a new user with role "Instructor"
  Then the user should receive an invitation email
  And after completing registration
  Then the user should see an instructor dashboard
  And should not see admin-only sections

Scenario: Student cannot access admin functions
  Given I am logged in as a Student
  When I attempt to open an admin-only URL
  Then I should receive an "access denied" response
  And I should be redirected to my dashboard

```

### 6.3 Question Bank & Test Templates

```
Scenario: Instructor creates a question
  Given I am logged in as an Instructor
  When I create a new multiple-choice question with 4 answers and 2 correct options
  And I link it to topic "Traffic Signs"
  Then the question should be visible in the question list for that topic

Scenario: Admin creates a random test template
  Given I am logged in as an Admin
  When I create a test template "Theory Exam A"
  And I select topics "Traffic Signs" and "Right of Way"
  And I set mode to "Random 30 questions"
  And I set pass criteria to "85% correct"
  Then the test template should be saved
  And the question pool should include all questions from those topics

```

### 6.4 Test Taking & Scoring

```
Scenario: Student completes a test and passes
  Given I am a Student enrolled in course "B - Car"
  And I have an available test "Theory Exam A"
  When I complete all questions with enough correct answers
  And I submit the test
  Then my test should be auto-scored
  And my score should be at least the pass threshold
  And my result should be recorded as "Pass"
  And I should see this result in my test history

Scenario: Test time limit
  Given the test "Mock Exam" has a 30-minute time limit
  And I start the test
  When 30 minutes have elapsed
  Then my answers should be submitted automatically or locked
  And the system should record the time taken

```

### 6.5 Courses, Completion & Certificates

```
Scenario: Student becomes eligible for certificate
  Given a course "B - Car" requires tests "Theory Final" and "Internal Exam"
  And the pass score for each test is 80%
  And I am a Student enrolled in this course
  When I pass both tests with at least 80%
  Then my course status should change to "Completed"
  And I should be marked as "Eligible for Certificate"

Scenario: Admin generates certificate
  Given I am an Admin
  And student Alex is eligible for certificate in course "B - Car"
  When I open the certificate generation screen
  And I confirm generation
  Then a unique certificate ID should be created
  And a downloadable certificate should be available to Alex

```

### 6.6 Scheduling & Attendance

```
Scenario: Student registers for a class with available capacity
  Given a schedule entry for course "B - Car" on "2025-03-10 18:00" with capacity 10
  And 5 students are already registered
  And I am a Student enrolled in "B - Car"
  When I register for that session
  Then my registration should be accepted
  And the registered count should increase to 6

Scenario: Instructor records attendance
  Given I am an Instructor
  And I have a session today with 10 registered students
  When I mark 8 students as present and 2 as absent
  Then the attendance records should be stored
  And students should see attendance in their course details

```

### 6.7 Payments

```
Scenario: Student successfully pays for a course
  Given course "B - Car" has a price of 300 EUR
  And I am a Student not yet paid for this course
  When I click "Pay now"
  And I am redirected to the payment provider
  And I complete the payment successfully
  Then the payment status should update to "Paid"
  And I should see "Paid" on my course page
  And an email receipt should be sent to me

Scenario: Failed payment
  Given I start a payment for course "B - Car"
  When the payment provider notifies failure
  Then the payment status should be "Failed"
  And I should see a clear error message and option to retry

```

### 6.8 Notifications

```
Scenario: Email on test assignment
  Given I am a Student enrolled in course "B - Car"
  And an Admin assigns a test "Internal Exam" to me
  When the assignment is saved
  Then the system should send me an email using the "Test assigned" template
  And the email should contain the test name and course name

Scenario: Reminder email for upcoming class
  Given I am registered for a class tomorrow at 10:00
  When the reminder job runs 24 hours before the class
  Then I should receive a class reminder email
  And it should contain the date, time and course name

```

### 6.9 Reporting

```
Scenario: Admin exports course completion report
  Given I am logged in as an Admin
  And I filter course "B - Car" for completions in the last month
  When I click "Export CSV"
  Then a CSV file should download
  And it should include all students who completed that course in that period
  And each row should include student name, completion date and certificate ID (if issued)

```

* * * * *

7\. Release Strategy & Timeline (Incremental Roadmap)
-----------------------------------------------------

Assumes an MVP-oriented team (~small cross-functional squad). Phases align with BRD but mapped to feature set.

### Phase 0 -- Discovery & Design (2--3 weeks)

-   Validate flows with 1--2 pilot schools.

-   Define information architecture and main navigation.

-   Wireframes for dashboards, course detail, test taking, schedule, admin panel.

**Deliverables:** Wireframes, clickable prototype, validated user stories, prioritized backlog.

* * * * *

### Phase 1 -- Core Platform & Roles (4--6 weeks)

Scope:

-   F1: Authentication & accounts (AUTH-1--4, basic verification).

-   F2: Roles & user management (ROLES-1--4).

-   F3: Question bank (QBANK-1--4).

-   F4: Test templates & test taking (TEST-1--5).

-   F5: Course & topic management (COURSE-1--3, 5).

-   F6: Basic certificates (CERT-1--3).

Goal:

-   Single school can run theory tests end-to-end, manually handling scheduling and payments.

Dependencies:

-   Decision on tech stack and hosting environment.

* * * * *

### Phase 2 -- Scheduling & Reporting (3--4 weeks)

Scope:

-   F7: Scheduling & registration (SCHED-1--4; possibly SCHED-5--6 if capacity).

-   F10: Admin dashboard & basic reporting (REPORT-1--3).

-   F11: Basic activity logging (ROLES-6, NFR-LOG-1).

Goal:

-   School can manage full lifecycle: class schedule, attendance, testing, basic reporting.

Dependencies:

-   Phase 1 features stable and used by pilot environment.

* * * * *

### Phase 3 -- Payments & Notifications (3--4 weeks)

Scope:

-   F8: Online payments (PAY-1--5).

-   F9: Notifications (NOTIF-1--4).

-   Certificates S-features: template customization, certificate revocation.

Goal:

-   End-to-end online operation: enrollment + payment + scheduling + testing + certification with automated notifications.

Dependencies:

-   Payment provider chosen; legal review on payment flows and terms.

* * * * *

### Phase 4 -- Hardening & Pilot Rollout (2--4 weeks)

Scope:

-   Performance testing & optimization.

-   Security review & fixes.

-   UX polish based on pilot feedback.

-   Finalize documentation (admin guide, instructor guide).

Goal:

-   Production-ready MVP for broader rollout.

* * * * *

8\. Risk Management & Assumptions (RAID Log)
--------------------------------------------

### 8.1 Risks

| ID | Risk | Likelihood | Impact | Rating | Mitigation |
| --- | --- | --- | --- | --- | --- |
| R1 | Regulatory misalignment (e.g., exam formats, data rules) | Medium | High | High | Engage domain experts early; maintain highly configurable tests and certificate templates. |
| R2 | Poor user adoption due to complex or confusing UX | Medium | High | High | Frequent usability tests with admins/instructors; prioritize simplicity over rare edge cases. |
| R3 | Payment provider integration delays or issues | Medium | Medium | Medium | Choose widely-used provider with good SDK; design payment layer as pluggable; allow manual "paid" override. |
| R4 | Security incident or data breach | Low | High | High | Use proven frameworks; conduct security review; strong RBAC; logging & monitoring; backups. |
| R5 | Performance issues during exam sessions | Medium | Medium | Medium | Load testing; optimize test-taking endpoints; caching of static data; scalable hosting. |
| R6 | Scope creep from nice-to-have features | High | Medium | High | Enforce MoSCoW; phase-based delivery; formal change control. |
| R7 | Insufficient localization from the start | Medium | Medium | Medium | Externalize strings early; design UI with variable text length in mind. |

### 8.2 Assumptions

| ID | Assumption | Impact if False | Action |
| --- | --- | --- | --- |
| A1 | Driving schools accept web-only solution (no native apps) | Pressure to build mobile earlier | Validate with pilots; ensure good mobile web UX. |
| A2 | Email is acceptable as primary authentication & notification channel | Need for SMS or other channels earlier than planned | Explore SMS in later roadmap; ensure email reliability. |
| A3 | One payment provider is sufficient for MVP | Additional integrations needed, scope increase | Choose provider with broad regional coverage. |
| A4 | Internet is available at school locations and to most students | Need for offline or low-connectivity support | Optimize for low bandwidth; consider offline options later. |
| A5 | Local regulations can be complied with via configurable criteria, without API integrations | Integration with authorities may be mandatory | Keep architecture open for future integrations. |

### 8.3 Issues

(Pre-filled with likely early issues; to be updated in project tracking.)

| ID | Issue | Status | Owner | Target Resolution |
| --- | --- | --- | --- | --- |
| I1 | Final decision on payment provider for first region | Open | PO/Dir | Before Phase 3 |
| I2 | Clarification on legal data retention periods per region | Open | Legal | Phase 0/1 |
| I3 | Confirm initial languages to support (local language + English) | Open | PO | Phase 0 |

### 8.4 Dependencies

| ID | Dependency | Description | Type |
| --- | --- | --- | --- |
| D1 | Email provider | Reliable SMTP/API for outgoing emails | External |
| D2 | Payment provider | Redirect-based card payment solution | External |
| D3 | Hosting / infrastructure | Cloud provider, domain setup, SSL certificates | Internal IT |
| D4 | Domain expertise | Access to driving school regulations and workflows | People |

* * * * *

9\. Glossary
------------

-   **Course:** A structured program of theory and practice leading to eligibility for driving license exams.

-   **Topic:** A sub-unit within a course (e.g., "Traffic Signs", "Rules at Intersections").

-   **Test Template:** Configuration of a test (question pool, number of questions, pass criteria).

-   **Test Instance:** A specific student's attempt on a test template.

-   **Certificate:** Evidence of course completion according to configured criteria.

-   **Schedule Entry:** A planned session for a course/topic at a specific date/time.

-   **RBAC:** Role-Based Access Control.

* * * * *

*End of PRD*